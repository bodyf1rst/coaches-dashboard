<div class="test-container">
  <div class="test-header">
    <h1>ğŸ§ª Phase 7: Side-by-Side Video Test</h1>
    <p>Testing: 2 videos side-by-side with click-to-play</p>
  </div>

  <!-- Loading State -->
  <div class="loading-section" *ngIf="loading">
    <div class="spinner"></div>
    <p>Loading video data from API...</p>
  </div>

  <!-- Error State -->
  <div class="error-section" *ngIf="error && !loading">
    <p class="error-message">âŒ {{ error }}</p>
    <button class="retry-button" (click)="loadVideos()">Try Again</button>
  </div>

  <!-- Side-by-Side Video Display -->
  <div class="two-video-container" *ngIf="!loading && !error && allVideos.length > 0">

    <!-- Loop through each video (should be 2) -->
    <div class="video-card" *ngFor="let video of allVideos; let i = index">

      <!-- Thumbnail or Video Player Container -->
      <div class="media-container">

        <!-- Show Thumbnail when not playing -->
        <div class="thumbnail-wrapper" *ngIf="!playingVideos[i]" (click)="toggleVideo(i)">
          <img
            [src]="video.thumbnailUrl"
            [alt]="video.video_title"
            class="video-thumbnail"
            loading="lazy">
          <div class="play-button-overlay">
            <div class="play-icon">â–¶</div>
          </div>
        </div>

        <!-- Show Video Player when playing -->
        <div class="video-wrapper" *ngIf="playingVideos[i]">
          <video
            controls
            crossorigin="anonymous"
            autoplay
            class="video-player"
            [src]="video.videoUrl">
            Your browser does not support the video tag.
          </video>
          <button class="close-video" (click)="toggleVideo(i)">âœ• Close Video</button>
        </div>

      </div>

      <!-- Video Information Below -->
      <div class="video-info">

        <!-- Title -->
        <h2 class="video-title">{{ video.video_title }}</h2>

        <!-- Metadata -->
        <div class="video-meta">
          <span class="meta-item">
            <strong>Duration:</strong> {{ video.duration || '1:00' }}
          </span>
          <span class="meta-item">
            <strong>Category:</strong> {{ video.category || 'Workout' }}
          </span>
        </div>

        <!-- Tags -->
        <div class="tags-section">
          <div class="tag-group" *ngIf="video.workout_tags && video.workout_tags.length > 0">
            <strong>Workout Type:</strong>
            <span class="tag" *ngFor="let tag of video.workout_tags">{{ tag }}</span>
          </div>
          <div class="tag-group" *ngIf="video.equipment_tags && video.equipment_tags.length > 0">
            <strong>Equipment:</strong>
            <span class="tag equipment-tag" *ngFor="let tag of video.equipment_tags">{{ tag }}</span>
          </div>
        </div>

        <!-- Transcription (Collapsible) -->
        <div class="transcription-section">
          <button
            class="transcription-toggle"
            (click)="toggleTranscriptionForVideo(i)"
            [attr.aria-expanded]="showTranscription[i]">
            <span class="toggle-label">ğŸ“ Transcription</span>
            <span class="toggle-icon">{{ showTranscription[i] ? 'â–²' : 'â–¼' }}</span>
          </button>

          <div class="transcription-content" *ngIf="showTranscription[i]">
            <p class="transcription-text">{{ video.transcription || 'No transcription available' }}</p>
          </div>
        </div>

      </div>
    </div>

  </div>

  <!-- Info Section -->
  <div class="test-info" *ngIf="!loading && !error">
    <h3>âœ… Phase 7 Complete - Side-by-Side Layout:</h3>
    <ul>
      <li>âœ… 2 videos displayed side-by-side</li>
      <li>âœ… Thumbnail on top, info below</li>
      <li>âœ… Click thumbnail to play video in-place</li>
      <li>âœ… Each video has its own controls</li>
      <li>âœ… Transcriptions toggle independently</li>
      <li>âœ… Full metadata from database</li>
    </ul>
  </div>

</div>
