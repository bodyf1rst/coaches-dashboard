<div class="video-library-container">
  <div class="header">
    <h2>Video Library</h2>
    <p>Manage and view all training videos</p>
  </div>

  <div class="controls">
    <div class="category-buttons">
      <button 
        *ngFor="let cat of categories" 
        [class.active]="selectedCategory === cat.value"
        (click)="onCategoryChange(cat.value)"
        class="category-btn">
        {{cat.label}}
      </button>
    </div>
    
    <div class="search-controls">
      <div class="search-box">
        <select [(ngModel)]="searchMode" (change)="filterVideos()" class="search-mode">
          <option value="all">Search All</option>
          <option value="title">Title Only</option>
          <option value="tags">Tags Only</option>
          <option value="transcription">Transcription</option>
        </select>
        <input 
          type="text" 
          [(ngModel)]="searchText" 
          (input)="onSearch()"
          placeholder="Search videos, tags, or transcriptions..."
          class="search-input">
      </div>
    </div>
  </div>

  <div class="tag-filter" *ngIf="allTags.length > 0">
    <div class="filter-header">
      <h3>Filter by Tags</h3>
      <button (click)="clearFilters()" class="clear-btn">Clear All</button>
    </div>
    <div class="tag-cloud">
      <button 
        *ngFor="let tag of allTags.slice(0, 20)" 
        [class.active]="selectedTags.includes(tag)"
        (click)="toggleTag(tag)"
        class="filter-tag">
        {{tag}}
      </button>
    </div>
  </div>

  <div *ngIf="isLoading" class="loading">
    <div class="spinner-border"></div>
    <p>Loading videos...</p>
  </div>

  <div *ngIf="!isLoading && filteredVideos.length === 0" class="no-videos">
    <p>No videos found</p>
  </div>

  <div *ngIf="!isLoading && filteredVideos.length > 0">
    <div class="pagination-info">
      Showing {{(currentPage - 1) * itemsPerPage + 1}} - {{currentPage * itemsPerPage > filteredVideos.length ? filteredVideos.length : currentPage * itemsPerPage}} of {{filteredVideos.length}} videos
    </div>
    <div class="video-grid">
      <div *ngFor="let video of paginatedVideos" class="video-card">
      <div class="video-thumbnail" (click)="playVideo(video)">
        <img *ngIf="video.thumbnail" 
             [src]="video.thumbnail" 
             [alt]="video.title"
             class="thumbnail-image">
        <div *ngIf="!video.thumbnail" class="placeholder-thumbnail">
          <div class="play-icon">▶</div>
        </div>
        <div class="thumbnail-overlay">
          <div class="play-button">▶</div>
        </div>
        <span class="duration">{{video.duration}}</span>
      </div>
      <div class="video-info">
        <h4>{{video.title}}</h4>
        <div class="video-tags">
          <span class="category">{{video.category}}</span>
          <span *ngFor="let tag of video.tags" class="tag">{{tag}}</span>
        </div>
        <div *ngIf="video.transcription" class="transcription-status">
          <span class="transcribed">✓ Transcribed</span>
        </div>
      </div>
      </div>
    </div>
    <div class="pagination-controls">
      <button (click)="previousPage()" [disabled]="currentPage === 1" class="btn btn-secondary">Previous</button>
      <span class="page-info">Page {{currentPage}} of {{totalPages}}</span>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages" class="btn btn-secondary">Next</button>
    </div>
  </div>
</div>
